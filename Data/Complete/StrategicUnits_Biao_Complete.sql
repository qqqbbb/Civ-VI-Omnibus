/*
	Originally created in XML by Biao (/u/Novemberisms on Reddit) for his Strategic Resource and Tech Tree Mod
	
	Redone in SQL and edited by thecrazyscotsman (/u/tyrannus1115 on Reddit) for thecrazyscotsman's Omnibus Mod (30 Nov 2016)
*/

--Create Strategic Resource class framework
INSERT INTO Types (Type, Kind)
	VALUES
		("ABILITY_IRON", "KIND_ABILITY"),
		("ABILITY_HORSE", "KIND_ABILITY"),
		("ABILITY_NITER", "KIND_ABILITY"),
		("ABILITY_COAL", "KIND_ABILITY"),
		("ABILITY_OIL", "KIND_ABILITY"),
		("ABILITY_ALU", "KIND_ABILITY"),
		("ABILITY_URANIUM", "KIND_ABILITY");
		
INSERT INTO Tags (Tag, Vocabulary)
	VALUES
		("CLASS_IRON", "ABILITY_CLASS"),
		("CLASS_HORSE", "ABILITY_CLASS"),
		("CLASS_NITER", "ABILITY_CLASS"),
		("CLASS_COAL", "ABILITY_CLASS"),
		("CLASS_OIL", "ABILITY_CLASS"),
		("CLASS_ALU", "ABILITY_CLASS"),
		("CLASS_URANIUM", "ABILITY_CLASS");

INSERT INTO TypeTags (Type, Tag)
	VALUES
		("ABILITY_IRON", "CLASS_IRON"),
		("ABILITY_HORSE", "CLASS_HORSE"),
		("ABILITY_NITER", "CLASS_NITER"),
		("ABILITY_COAL", "CLASS_COAL"),
		("ABILITY_OIL", "CLASS_OIL"),
		("ABILITY_ALU", "CLASS_ALU"),
		("ABILITY_URANIUM", "CLASS_URANIUM"),
		("UNIT_SWORDSMAN", "CLASS_IRON"),
		("UNIT_MUSKETMAN", "CLASS_NITER"),
		("UNIT_BOMBARD", "CLASS_NITER"),
		("UNIT_KNIGHT", "CLASS_IRON"),
		("UNIT_KNIGHT", "CLASS_HORSE"),
		("UNIT_HORSEMAN", "CLASS_HORSE"),
		("UNIT_CAVALRY", "CLASS_HORSE"),
		("UNIT_IRONCLAD", "CLASS_COAL"),
		("UNIT_BATTLESHIP", "CLASS_COAL"),
		("UNIT_AIRCRAFT_CARRIER", "CLASS_OIL"),
		("UNIT_TANK", "CLASS_OIL"),
		("UNIT_FIGHTER", "CLASS_ALU"),
		("UNIT_BOMBER", "CLASS_ALU"),
		("UNIT_JET_BOMBER", "CLASS_ALU"),
		("UNIT_JET_FIGHTER", "CLASS_ALU"),
		("UNIT_NUCLEAR_SUBMARINE", "CLASS_URANIUM"),
		("UNIT_MODERN_ARMOR", "CLASS_URANIUM");

--Remove Strategic Resource requirements
--Lower base combat strength of Strategic Resource unit classes		
UPDATE Units SET Combat = Combat - 5 
	WHERE (StrategicResource LIKE 'RESOURCE%') AND (Combat > 0);
UPDATE Units SET RangedCombat = RangedCombat - 5 
	WHERE (StrategicResource LIKE 'RESOURCE%') AND (RangedCombat > 0);
UPDATE Units SET Bombard = Bombard - 5 
	WHERE (StrategicResource LIKE 'RESOURCE%') AND (Bombard > 0);
UPDATE Units SET AntiAirCombat = AntiAirCombat - 5 
	WHERE (StrategicResource LIKE 'RESOURCE%') AND (AntiAirCombat > 0);
UPDATE Units SET StrategicResource = NULL;

--Individual unit changes	
UPDATE Units SET MandatoryObsoleteTech = 'TECH_IRON_WORKING'
	WHERE UnitType = 'UNIT_WARRIOR';
UPDATE Units SET Cost = 100
	WHERE UnitType = 'UNIT_HORSEMAN';
UPDATE Units SET Combat = 38
	WHERE UnitType = 'UNIT_KNIGHT';

INSERT INTO UnitAbilities (UnitAbilityType, Name, Description)
	VALUES
		("ABILITY_IRON", "LOC_ABILITY_IRON_NAME", "LOC_ABILITY_IRON_DESCRIPTION"),
		("ABILITY_HORSE", "LOC_ABILITY_HORSE_NAME", "LOC_ABILITY_HORSE_DESCRIPTION"),
		("ABILITY_NITER", "LOC_ABILITY_NITER_NAME", "LOC_ABILITY_NITER_DESCRIPTION"),
		("ABILITY_COAL", "LOC_ABILITY_COAL_NAME", "LOC_ABILITY_COAL_DESCRIPTION"),
		("ABILITY_OIL", "LOC_ABILITY_OIL_NAME", "LOC_ABILITY_OIL_DESCRIPTION"),
		("ABILITY_ALU", "LOC_ABILITY_ALU_NAME", "LOC_ABILITY_ALU_DESCRIPTION"),
		("ABILITY_URANIUM", "LOC_ABILITY_URANIUM_NAME", "LOC_ABILITY_URANIUM_DESCRIPTION");

INSERT INTO UnitAbilityModifiers (UnitAbilityType, ModifierId)
	VALUES
		("ABILITY_IRON", "IRON_RESOURCE_COMBAT"),
		("ABILITY_HORSE", "HORSE_RESOURCE_COMBAT"),
		("ABILITY_NITER", "NITER_RESOURCE_COMBAT"),
		("ABILITY_COAL", "COAL_RESOURCE_COMBAT"),
		("ABILITY_OIL", "OIL_RESOURCE_COMBAT"),
		("ABILITY_ALU", "ALU_RESOURCE_COMBAT"),
		("ABILITY_URANIUM", "URANIUM_RESOURCE_COMBAT");

INSERT INTO Modifiers (ModifierId, ModifierType, SubjectRequirementSetId)
	VALUES
		("IRON_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "IRON_RESOURCE_COMBAT_REQUIREMENTS"),
		("HORSE_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "HORSE_RESOURCE_COMBAT_REQUIREMENTS"),
		("NITER_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "NITER_RESOURCE_COMBAT_REQUIREMENTS"),
		("COAL_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "COAL_RESOURCE_COMBAT_REQUIREMENTS"),
		("OIL_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "OIL_RESOURCE_COMBAT_REQUIREMENTS"),
		("ALU_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "ALU_RESOURCE_COMBAT_REQUIREMENTS"),
		("URANIUM_RESOURCE_COMBAT", "MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH", "URANIUM_RESOURCE_COMBAT_REQUIREMENTS");

INSERT INTO ModifierArguments (ModifierId, Name, Value)
	VALUES
		("IRON_RESOURCE_COMBAT", "Amount", 5),
		("HORSE_RESOURCE_COMBAT", "Amount", 5),
		("NITER_RESOURCE_COMBAT", "Amount", 5),
		("COAL_RESOURCE_COMBAT", "Amount", 5),
		("OIL_RESOURCE_COMBAT", "Amount", 5),
		("ALU_RESOURCE_COMBAT", "Amount", 5),
		("URANIUM_RESOURCE_COMBAT", "Amount", 5);

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType)
	VALUES
		("IRON_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY"),
		("HORSE_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY"),
		("NITER_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY"),
		("COAL_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY"),
		("OIL_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY"),
		("ALU_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY"),
		("URANIUM_RESOURCE_COMBAT_REQUIREMENTS", "REQUIREMENTSET_TEST_ANY");

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId)
	VALUES
		("IRON_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_IRON"),
		("HORSE_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_HORSE"),
		("NITER_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_NITER"),
		("COAL_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_COAL"),
		("OIL_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_OIL"),
		("ALU_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_ALU"),
		("URANIUM_RESOURCE_COMBAT_REQUIREMENTS", "REQUIRES_OWNED_URANIUM");

INSERT INTO Requirements (RequirementId, RequirementType)
	VALUES
		("REQUIRES_OWNED_IRON", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED"),
		("REQUIRES_OWNED_HORSE", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED"),
		("REQUIRES_OWNED_NITER", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED"),
		("REQUIRES_OWNED_COAL", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED"),
		("REQUIRES_OWNED_OIL", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED"),
		("REQUIRES_OWNED_ALU", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED"),
		("REQUIRES_OWNED_URANIUM", "REQUIREMENT_PLAYER_HAS_RESOURCE_OWNED");
	
INSERT INTO RequirementArguments (RequirementId, Name, Value)
	VALUES
		("REQUIRES_OWNED_IRON", "ResourceType", "RESOURCE_IRON"),
		("REQUIRES_OWNED_HORSE", "ResourceType", "RESOURCE_HORSES"),
		("REQUIRES_OWNED_NITER", "ResourceType", "RESOURCE_NITER"),
		("REQUIRES_OWNED_COAL", "ResourceType", "RESOURCE_COAL"),
		("REQUIRES_OWNED_OIL", "ResourceType", "RESOURCE_OIL"),
		("REQUIRES_OWNED_ALU", "ResourceType", "RESOURCE_ALUMINUM"),
		("REQUIRES_OWNED_URANIUM", "ResourceType", "RESOURCE_URANIUM");

INSERT INTO ModifierStrings (ModifierId, Context, Text)
	VALUES
		("IRON_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_IRON_RESOURCE_COMBAT_MODIFIER_DESCRIPTION"),
		("HORSE_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_HORSE_RESOURCE_COMBAT_MODIFIER_DESCRIPTION"),
		("NITER_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_NITER_RESOURCE_COMBAT_MODIFIER_DESCRIPTION"),
		("COAL_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_COAL_RESOURCE_COMBAT_MODIFIER_DESCRIPTION"),
		("OIL_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_OIL_RESOURCE_COMBAT_MODIFIER_DESCRIPTION"),
		("ALU_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_ALU_RESOURCE_COMBAT_MODIFIER_DESCRIPTION"),
		("URANIUM_RESOURCE_COMBAT", "Preview", "LOC_ABILITY_URANIUM_RESOURCE_COMBAT_MODIFIER_DESCRIPTION");